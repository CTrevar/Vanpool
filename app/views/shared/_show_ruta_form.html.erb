<script type="text/javascript">
   $(function() {
                //Datemask dd/mm/yyyy
                $("#datemask").inputmask("dd/mm/yyyy", {"placeholder": "dd/mm/yyyy"});

                //Timepicker
                $(".timepicker").timepicker({
                    showInputs: false
                });
            });
   </script>

        <section class="content">
        <div id="map-canvas">
        </div>
        </br>

         <div class="col-md-6">

            <%= form_tag(controller:"rutas", action:"actualizar") do%>
            
            <% if @ruta.errors.any? %>
                <div class="alert alert-danger alert-dismissable">
                  <i class="fa fa-times"></i>
                  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                  
                  <ul>
                    <% @ruta.errors.full_messages.each do |msg| %>
                        <li><%= msg %></li>
                    <% end %>
                  </ul>
                </div>
            <% end %>

                <div class="form-group">
                    <label for="nombreRuta">Nombre</label>
                    <input  class="form-control" name="nombreRuta" placeholder="Nombre de la Ruta"  value="<%= @ruta.nombre %>">
                </div>

                <div class="form-group">
                  <label for="origen">Origen</label>
                  <input  class="form-control" id="origenRuta" placeholder="Origen"  value="<%= @paradas_ruta.first.nombre %>">
                </div>
                <div class="form-group">
                  <label for="destino">Destino</label>
                  <input  class="form-control" id="destinoRuta" placeholder="Destino"  value="<%= @paradas_ruta.last.nombre %>">
                </div>

                <div class="form-group">
                    <label for="precioRuta">Precio</label>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-dollar"></i></span>
                        <input  class="form-control" name="precio" placeholder="Precio" value="<%= @ruta.precio %>">
                    </div>
                </div>

                <div class="form-group">
                    <label for="precioRuta">Zona</label>
                    <div class="input-group">
                        <%= collection_select(:ruta, :zona_id, Zona.all(:order => 'nombre'), :id, :nombre, { :selected => @ruta.zona_id }, :class => "form-control" ) %>
                    </div>
                </div>

                <div class="bootstrap-timepicker">
                    <div class="form-group">
                      <label for="horario">Hora de Inicio</label>
                        <div class="input-group">
                        <span class="input-group-addon"><i class="fa  fa-clock-o"></i></span>
                            <% horario = @ruta.horario.hora.strftime("%I:%M %p") %>
                            <input type="text" id="horarioRuta" name="horarioRuta" class="form-control timepicker"  value="<%= horario %>">
                        
                        </div> <!-- input-group -->
                    </div>  <!-- form group -->
              </div><!-- /.timepicker -->



            <div class="form-group">
                
                    <label>Frecuencia:</label>
                    <div class="input-group">
                    

                        <table class="table">
                            <tr>
                                <td><input type="checkbox" name="lunes"  aria-checked="<%= @ruta.frecuencia.lunes %>" ></td>
                                <td><input type="checkbox" name="martes" aria-checked="false"></td>
                                <td><input type="checkbox" name="miercoles" aria-checked="<%= @ruta.frecuencia.miercoles %>"></td>
                                <td><input type="checkbox" name="jueves" checked="<%= @ruta.frecuencia.jueves %>"></td>
                                <td><input type="checkbox" name="viernes" checked="<%= @ruta.frecuencia.viernes %>"></td>
                                <td><input type="checkbox" name="sabado" checked="<%= @ruta.frecuencia.sabado %>"></td>
                                <td><input type="checkbox" name="domingo" checked="<%= @ruta.frecuencia.domingo %>"></td>
                            </tr>
                            <tr>
                                <td>L</td>
                                <td>M</td>
                                <td>Mie</td>
                                <td>J</td>
                                <td>V</td>
                                <td>S</td>
                                <td>D</td>
                            </tr>
                        </table>
                    
                    </div>
            </div><!-- /.form group frecuencia -->

            <div class="form-group ">
                <label for="conductorRuta">Conductor</label>
                    <div class="user-panel bg-gray">
                    <div class="pull-left image">
                        <img src="../img/avatar3.png" class="img-circle" alt="User Image" />
                    </div>
                    <div class="pull-left info">
                        <b>Id </b>
                        <%= text_field_tag("conductorId", @ruta.conductor.id, :style => "background-color:rgba(0, 0, 0, 0); border:none")   %> 
                         </br>
                        <b>Nombre: </b>
                        <input id ="conductorNombre" disabled style="background-color:rgba(0, 0, 0, 0); border:none"  value="<%= @ruta.conductor.user.name %>" ></input> </br>
                        <br>
                        <b>Licencia: </b>
                        <input id ="conductorLicencia" disabled style="background-color:rgba(0, 0, 0, 0); border:none"  value="<%= @ruta.conductor.licenciaConductor %>"></input> </br> </br>
                       <button type="button" class="btn btn-buscar-nav btn-flat pull-left" data-toggle="modal" data-target="#conductorsModal">Cambiar Conductor</button>
                       
                    </div>
                     
                    </div>
            </div>

            <div class="form-group ">
                <label for="vanRuta">Van</label>
                    <div class="user-panel bg-gray">
                        <div class="pull-left image">
                            <i class="fa fa-truck"></i>
                        </div>
                        <div class="pull-left info">
                            
                            <b>Id: </b>
                            <%= text_field_tag("vanId", @ruta.van.id, :style => "background-color:rgba(0, 0, 0, 0); border:none") %> </br>
                            <b>Placa: </b>
                            <input id ="vanPlaca" disabled style="background-color:rgba(0, 0, 0, 0); border:none"  value="<%= @ruta.van.placa %>"></input> </br>
                            <b>Modelo: </b>
                            <input id ="vanModelo" disabled style="background-color:rgba(0, 0, 0, 0); border:none"  value="<%= @ruta.van.modelo %>"></input></br> </br>
                            <button type="button" class="btn btn-buscar-nav btn-flat pull-left" data-toggle="modal" data-target="#myModal">Cambiar Van</button>
                           
                        </div>
                    </div>
            </div>

            </div><!--div class column6-->

            <div class="col-md-6">
                <div class="box box-success">
                    <div class="box-header">
                        <i class="ion ion-clipboard"></i>
                        <h3 class="box-title">Traza la ruta</h3>
                        
                    </div><!-- /.box-header -->

                        

                    <!-- Paradas -->
                    <div id = "Paradas">
                        <% count = 0 %>
                        <input  class="form-control" id="idParada_<%=count%>" name="idParada_<%=count%>" style="display: none" > </input>
                        <div class="paradatype">
                            <input id="nombreParada_<%=count%>" name="nombreParada_<%=count%>" class="typeahead" type="text" placeholder="Parada" autocomplete="off" spellcheck="false"  value="<%= @paradas_ruta.first.nombre %>"></input>
                        </div>
                        <input  class="form-control" id="latitudParada_<%=count%>" name="latitudParada_<%=count%>" style="display: none" value="<%= @paradas_ruta.first.latitud %>"> </input>
                        <input  class="form-control" id="longitudParada_<%=count%>" name="longitudParada_<%=count%>" style="display: none" value="<%= @paradas_ruta.first.longitud %>"> </input>
                        <input  class="form-control" id="posicionParada_<%=count%>" name="posicionParada_<%=count%>" style="display: none" > </input>
                        <input  class="form-control" id="tiempoParada_<%=count%>" name="tiempoParada_<%=count%>" style="display: none" > </input>
                        <input  class="form-control" id="distanciaParada_<%=count%>" name="distanciaParada_<%=count%>" style="display: none" > </input>
                        <input type="button" value="Buscar" onclick="geocodeMarcador()">

                        <% count += 1 %>
                        <input  class="form-control" id="idParada_<%=count%>" name="idParada_<%=count%>" style="display: none"  > </input>
                        <input  class="form-control" id="nombreParada_<%=count%>"  name="nombreParada_<%=count%>" size="25" value="<%= @paradas_ruta.last.nombre %>"> </input>
                        <input  class="form-control" id="latitudParada_<%=count%>" name="latitudParada_<%=count%>" style="display: none" value="<%= @paradas_ruta.last.latitud %>" > </input>
                        <input  class="form-control" id="longitudParada_<%=count%>" name="longitudParada_<%=count%>" style="display: none" value="<%= @paradas_ruta.last.longitud %>"  > </input>
                        <input  class="form-control" id="posicionParada_<%=count%>" name="posicionParada_<%=count%>" style="display: none"  > </input>
                        <input  class="form-control" id="tiempoParada_<%=count%>" name="tiempoParada_<%=count%>" style="display: none" > </input>
                        <input  class="form-control" id="distanciaParada_<%=count%>" name="distanciaParada_<%=count%>" style="display: none" > </input>
                        <input type="button" value="Buscar" onclick="geocodeMarcador()">

                    </div>

                    <div id="Paradas2"></div>




                    <input id="numeroParadas" name="numeroParadas" placeholder="NUm" value ="1" style="display: none"> </input>
                    <input type="button" value="Más Paradas" onclick="masParadas()">

                

                <p></p>



                </div><!-- /.box-body -->
             </div><!-- /.box -->

            
                <%= submit_tag("Editar")%>
             <% end %>
        




     
             
        

         </div><!--div class column6-->

    
 <%= render 'shared/modal_vans' %>
  <%= render 'shared/modal_conductors' %>
         </div>

         

		  </section>






