!function(t){"use strict";function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(t){return t instanceof Function}function a(t){return!e(t)&&t instanceof Object}function o(t,e){var i;for(i in e)a(e[i])||n(e[i])?(a(e[i])&&!a(t[i])&&(t[i]={}),n(e[i])&&!n(t[i])&&(t[i]=[]),o(t[i],e[i])):void 0!==e[i]&&(t[i]=e[i])}function i(t,n){var e={};return o(e,t),o(e,n),e}function r(t){var n,e,a,o,i,r,c,s,l,d,u;return d=Object.prototype.toString.call(t),"[object Date]"===d?t:"[object String]"===d&&(a=t.match(P))?(u=parseInt(a[1],10),r=parseInt(a[3],10)-1,n=parseInt(a[5],10),e=parseInt(a[7],10),i=a[9]?parseInt(a[9],10):0,l=a[11]?parseInt(a[11],10):0,o=a[12]?1e3*parseFloat(E+a[12].slice(1)):0,s=Date.UTC(u,r,n,e,i,l,o),a[13]&&a[14]&&(c=60*a[15],a[17]&&(c+=parseInt(a[17],10)),c*="-"===a[14]?-1:1,s-=60*c*1e3),new Date(s)):void 0}function c(t){var n,e,a;for(n=0;n<t.length;n++)for(a=t[n].data,e=0;e<a.length;e++)if(a[e][1]<0)return!0;return!1}function s(t,n,e,a,o){return function(r,s,l){var d=i({},t);return d=i(d,l||{}),s.hideLegend&&n(d),"min"in s?e(d,s.min):c(r)||e(d,0),"max"in s&&a(d,s.max),s.stacked&&o(d),s.colors&&(d.colors=s.colors),d=i(d,s.library||{})}}function l(t,n){document.body.innerText?t.innerText=n:t.textContent=n}function d(t,n){l(t,"Error Loading Chart: "+n),t.style.color="#ff0000"}function u(n,e,a){var o=t.jQuery||t.Zepto||t.$;o.ajax({dataType:"json",url:e,success:a,error:function(t,e,a){var o="string"==typeof a?a:a.message;d(n,o)}})}function f(t,n){try{n(t)}catch(e){throw d(t.element,e.message),e}}function h(t,n){"string"==typeof t.dataSource?u(t.element,t.dataSource,function(e){t.data=e,f(t,n)}):(t.data=t.dataSource,f(t,n))}function p(t){return""+t}function v(t){return parseFloat(t)}function m(t){if("object"!=typeof t)if("number"==typeof t)t=new Date(1e3*t);else{var n=t.replace(/ /,"T").replace(" ","").replace("UTC","Z");t=r(n)||new Date(t)}return t}function g(t){if(!n(t)){var e,a=[];for(e in t)t.hasOwnProperty(e)&&a.push([e,t[e]]);t=a}return t}function w(t,n){return t[0].getTime()-n[0].getTime()}function y(t,n){var a,o,i;for(i="render"+t,a=0;a<W.length;a++)if(o=W[a],e(o[i]))return o[i](n);throw new Error("No adapter found")}function C(t,e,a){var o,i,r,c,s;for(!n(t)||"object"!=typeof t[0]||n(t[0])?(t=[{name:"Value",data:t}],e.hideLegend=!0):e.hideLegend=!1,e.discrete&&(a=!1),o=0;o<t.length;o++){for(r=g(t[o].data),c=[],i=0;i<r.length;i++)s=r[i][0],s=a?m(s):p(s),c.push([s,v(r[i][1])]);a&&c.sort(w),t[o].data=c}return t}function b(t){var n,e=g(t);for(n=0;n<e.length;n++)e[n]=[p(e[n][0]),v(e[n][1])];return e}function x(t){var n;for(n=0;n<t.length;n++)t[n][1]=m(t[n][1]),t[n][2]=m(t[n][2]);return t}function k(t){t.data=C(t.data,t.options,!0),y("LineChart",t)}function T(t){t.data=C(t.data,t.options,!1),y("ColumnChart",t)}function S(t){t.data=b(t.data),y("PieChart",t)}function A(t){t.data=C(t.data,t.options,!1),y("BarChart",t)}function z(t){t.data=C(t.data,t.options,!0),y("AreaChart",t)}function j(t){t.data=b(t.data),y("GeoChart",t)}function L(t){t.data=x(t.data),y("Timeline",t)}function D(t,n,e,a,o){"string"==typeof n&&(n=document.getElementById(n)),t.element=n,t.options=a||{},t.dataSource=e,O.charts[n.id]=t,h(t,o)}var O,P,E,I=t.Chartkick||{},W=[];if(P=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,E=String(1.5).charAt(1),"Highcharts"in t){var B=new function(){var n=t.Highcharts,e={chart:{},xAxis:{labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},series:{marker:{}}}},a=function(t){t.legend.enabled=!1},o=function(t,n){t.yAxis.min=n},r=function(t,n){t.yAxis.max=n},c=function(t){t.plotOptions.series.stacking="normal"},l=s(e,a,o,r,c);this.renderLineChart=function(t,e){e=e||"spline";var a={};"areaspline"===e&&(a={plotOptions:{areaspline:{stacking:"normal"},series:{marker:{enabled:!1}}}});var o,i,r,c=l(t.data,t.options,a);c.xAxis.type=t.options.discrete?"category":"datetime",c.chart.type=e,c.chart.renderTo=t.element.id;var s=t.data;for(i=0;i<s.length;i++){if(o=s[i].data,!t.options.discrete)for(r=0;r<o.length;r++)o[r][0]=o[r][0].getTime();s[i].marker={symbol:"circle"}}c.series=s,new n.Chart(c)},this.renderPieChart=function(t){var a={};t.options.colors&&(a.colors=t.options.colors);var o=i(i(e,a),t.options.library||{});o.chart.renderTo=t.element.id,o.series=[{type:"pie",name:"Value",data:t.data}],new n.Chart(o)},this.renderColumnChart=function(t,e){var a,o,i,r,e=e||"column",c=t.data,s=l(c,t.options),d=[];for(s.chart.type=e,s.chart.renderTo=t.element.id,a=0;a<c.length;a++)for(i=c[a],o=0;o<i.data.length;o++)r=i.data[o],d[r[0]]||(d[r[0]]=new Array(c.length)),d[r[0]][a]=r[1];var u=[];for(a in d)d.hasOwnProperty(a)&&u.push(a);s.xAxis.categories=u;var f=[];for(a=0;a<c.length;a++){for(r=[],o=0;o<u.length;o++)r.push(d[u[o]][a]||0);f.push({name:c[a].name,data:r})}s.series=f,new n.Chart(s)};var d=this;this.renderBarChart=function(t){d.renderColumnChart(t,"bar")},this.renderAreaChart=function(t){d.renderLineChart(t,"areaspline")}};W.push(B)}if(t.google&&t.google.setOnLoadCallback){var G=new function(){var n=t.google,e={},a=[],o=function(){for(var t,e,o=0;o<a.length;o++)t=a[o],e=n.visualization&&("corechart"==t.pack&&n.visualization.LineChart||"timeline"==t.pack&&n.visualization.Timeline),e&&(t.callback(),a.splice(o,1),o--)},r=function(t,i){if(i||(i=t,t="corechart"),a.push({pack:t,callback:i}),e[t])o();else{e[t]=!0;var r={packages:[t],callback:o};I.language&&(r.language=I.language),n.load("visualization","1",r)}},c={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},l=function(t){t.legend.position="none"},d=function(t,n){t.vAxis.viewWindow.min=n},u=function(t,n){t.vAxis.viewWindow.max=n},f=function(t,n){t.hAxis.viewWindow.min=n},h=function(t,n){t.hAxis.viewWindow.max=n},p=function(t){t.isStacked=!0},m=s(c,l,d,u,p),g=function(t,e){var a=new n.visualization.DataTable;a.addColumn(e,"");var o,i,r,c,s,l=[];for(o=0;o<t.length;o++)for(r=t[o],a.addColumn("number",r.name),i=0;i<r.data.length;i++)c=r.data[i],s="datetime"===e?c[0].getTime():c[0],l[s]||(l[s]=new Array(t.length)),l[s][o]=v(c[1]);var d=[];for(o in l)l.hasOwnProperty(o)&&d.push(["datetime"===e?new Date(v(o)):o].concat(l[o]));return"datetime"===e&&d.sort(w),a.addRows(d),a},y=function(n){t.attachEvent?t.attachEvent("onresize",n):t.addEventListener&&t.addEventListener("resize",n,!0),n()};this.renderLineChart=function(t){r(function(){var e=m(t.data,t.options),a=g(t.data,t.options.discrete?"string":"datetime");t.chart=new n.visualization.LineChart(t.element),y(function(){t.chart.draw(a,e)})})},this.renderPieChart=function(t){r(function(){var e={chartArea:{top:"10%",height:"80%"}};t.options.colors&&(e.colors=t.options.colors);var a=i(i(c,e),t.options.library||{}),o=new n.visualization.DataTable;o.addColumn("string",""),o.addColumn("number","Value"),o.addRows(t.data),t.chart=new n.visualization.PieChart(t.element),y(function(){t.chart.draw(o,a)})})},this.renderColumnChart=function(t){r(function(){var e=m(t.data,t.options),a=g(t.data,"string");t.chart=new n.visualization.ColumnChart(t.element),y(function(){t.chart.draw(a,e)})})},this.renderBarChart=function(t){r(function(){var e={hAxis:{gridlines:{color:"#ccc"}}},a=s(c,l,f,h,p)(t.data,t.options,e),o=g(t.data,"string");t.chart=new n.visualization.BarChart(t.element),y(function(){t.chart.draw(o,a)})})},this.renderAreaChart=function(t){r(function(){var e={isStacked:!0,pointSize:0,areaOpacity:.5},a=m(t.data,t.options,e),o=g(t.data,t.options.discrete?"string":"datetime");t.chart=new n.visualization.AreaChart(t.element),y(function(){t.chart.draw(o,a)})})},this.renderGeoChart=function(t){r(function(){var e={legend:"none",colorAxis:{colors:t.options.colors||["#f6c7b6","#ce502d"]}},a=i(i(c,e),t.options.library||{}),o=new n.visualization.DataTable;o.addColumn("string",""),o.addColumn("number","Value"),o.addRows(t.data),t.chart=new n.visualization.GeoChart(t.element),y(function(){t.chart.draw(o,a)})})},this.renderTimeline=function(t){r("timeline",function(){var e={legend:"none"};t.options.colors&&(e.colorAxis.colors=t.options.colors);var a=i(i(c,e),t.options.library||{}),o=new n.visualization.DataTable;o.addColumn({type:"string",id:"Name"}),o.addColumn({type:"date",id:"Start"}),o.addColumn({type:"date",id:"End"}),o.addRows(t.data),t.chart=new n.visualization.Timeline(t.element),y(function(){t.chart.draw(o,a)})})}};W.push(G)}O={LineChart:function(t,n,e){D(this,t,n,e,k)},PieChart:function(t,n,e){D(this,t,n,e,S)},ColumnChart:function(t,n,e){D(this,t,n,e,T)},BarChart:function(t,n,e){D(this,t,n,e,A)},AreaChart:function(t,n,e){D(this,t,n,e,z)},GeoChart:function(t,n,e){D(this,t,n,e,j)},Timeline:function(t,n,e){D(this,t,n,e,L)},charts:{}},t.Chartkick=O}(window);