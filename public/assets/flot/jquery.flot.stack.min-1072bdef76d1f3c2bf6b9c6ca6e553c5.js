!function(t){function e(t){function e(t,e){for(var n=null,i=0;i<e.length&&t!=e[i];++i)e[i].stack==t.stack&&(n=e[i]);return n}function n(t,n,i){if(null!=n.stack&&n.stack!==!1){var o=e(n,t.getData());if(o){for(var r,a,s,l,c,u,h,d,f=i.pointsize,p=i.points,g=o.datapoints.pointsize,m=o.datapoints.points,v=[],y=n.lines.show,x=n.bars.horizontal,b=f>2&&(x?i.format[2].x:i.format[2].y),w=y&&n.lines.steps,k=!0,C=x?1:0,T=x?0:1,$=0,S=0;;){if($>=p.length)break;if(h=v.length,null==p[$]){for(d=0;f>d;++d)v.push(p[$+d]);$+=f}else if(S>=m.length){if(!y)for(d=0;f>d;++d)v.push(p[$+d]);$+=f}else if(null==m[S]){for(d=0;f>d;++d)v.push(null);k=!0,S+=g}else{if(r=p[$+C],a=p[$+T],l=m[S+C],c=m[S+T],u=0,r==l){for(d=0;f>d;++d)v.push(p[$+d]);v[h+T]+=c,u=c,$+=f,S+=g}else if(r>l){if(y&&$>0&&null!=p[$-f]){for(s=a+(p[$-f+T]-a)*(l-r)/(p[$-f+C]-r),v.push(l),v.push(s+c),d=2;f>d;++d)v.push(p[$+d]);u=c}S+=g}else{if(k&&y){$+=f;continue}for(d=0;f>d;++d)v.push(p[$+d]);y&&S>0&&null!=m[S-g]&&(u=c+(m[S-g+T]-c)*(r-l)/(m[S-g+C]-l)),v[h+T]+=u,$+=f}k=!1,h!=v.length&&b&&(v[h+2]+=u)}if(w&&h!=v.length&&h>0&&null!=v[h]&&v[h]!=v[h-f]&&v[h+1]!=v[h-f+1]){for(d=0;f>d;++d)v[h+f+d]=v[h+d];v[h+1]=v[h-f+1]}}i.points=v}}}t.hooks.processDatapoints.push(n)}var n={series:{stack:null}};t.plot.plugins.push({init:e,options:n,name:"stack",version:"1.2"})}(jQuery);